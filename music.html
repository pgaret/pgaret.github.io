<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Music Tastes</title>
    <link href="https://fonts.googleapis.com/css?family=Slabo+27px" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="styling.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="portfolio.js"></script>
  </head>
  <script>
    function getHashParams() {
    	var hashParams = {};
    	var e, r = /([^&;=]+)=?([^&;]*)/g,
    			q = window.location.hash.substring(1);
    	while ( e = r.exec(q)) {
    		 hashParams[e[1]] = decodeURIComponent(e[2]);
    	}
    	return hashParams;
    }

    function getMusicInfo(){
    	var params = getHashParams()
    	var access_token = params.access_token
    	var state = params.state
    	var stored_state = localStorage.getItem(state_key)

    	if (access_token && (state == null || state !== stored_state)){
    		alert("Authorization failed")
    	} else {
    		localStorage.removeItem(state_key)
    		if (access_token){
    			$.ajax({
    					url: 'https://api.spotify.com/v1/me',
    					headers: {
    						'Authorization': 'Bearer ' + access_token
    					},
    					success: function(response) {
    						console.log(response)
    					}
    			});
    		} else {
    				console.log("Fail")
    		}
    	}
    }
  </script>
  <body>
    <h1>Peregrin's Music Tastes</h1>
    <h4>Brought to you via Spotify</h4>
  </body>
</html>
